<div class="flex flex-row justify-content-between">
    <div class="flex justify-content-start">
        <h3 class="p-0 m-0 mb-2">
            Forecast Detail: {{group.name}}
        </h3>
    </div>
</div>

<div style="display: flex; flex-direction: row;">
  <div style="text-align: center">
    <div style="display: flex; flex-direction: row">
      <div style="display: flex; align-items: center; flex-direction: row">
        <div class="legend" style="background-color: #aae3ff"></div>
        <div class="textlegend">Public Holidays</div>
      </div>
      <div style="display: flex; align-items: center; flex-direction: row">
        <div class="legend" style="background-color: #ffffaa"></div>
        <div class="textlegend">Vacation</div>
      </div>
      <div style="display: flex; align-items: center; flex-direction: row">
        <div class="legend" style="background-color: #c2c2cc"></div>
        <div class="textlegend">Weekend</div>
      </div>
      <div style="display: flex; align-items: center; flex-direction: row; margin-right: 10px;">
        <div class="legend" style="background-color: #f7bd46" ></div>
        <div class="textlegend">Other</div>
      </div>
    </div>
  </div>

  <div class="month-selector" style="margin-left: auto; display: flex; align-items: center;">
    <p style="margin-right: 5px;">Selected Month</p>
    <button pButton pRipple type="button" icon="pi pi-angle-left"
                    class="p-button-rounded p-button-text" (click)="previousMonth()" [disabled]="isPreviousMonthDisabled()"></button>
    <p-dropdown [(ngModel)]="selectedMonth" (onChange)="onChangeMonth($event)" [options]="monthsList" optionLabel="code"></p-dropdown>
    <button pButton pRipple type="button" icon="pi pi-angle-right"
                    class="p-button-rounded p-button-text" (click)="nextMonth()" [disabled]="isNextMonthDisabled()"></button>
  </div>
</div>

<p-table [style]="{'height':'calc(90vh - 175px)','width':tableWidth}" 
         [scrollable]="true" scrollHeight="flex" selectionMode="single" 
         [value]="groups" [responsive]="true" styleClass="p-datatable-striped" 
         [paginator]="true" [rows]="20" sortField="name" [sortOrder]="1">

  <ng-template pTemplate="header">
    <tr style="border-bottom: 2px solid deepskyblue;">
      <th>
        <div class="w-full top-header" style="text-align: center;">
          <span class="justify-content-center" style="text-align: center;">Person</span>
        </div>                
      </th>

      <th class="flex-none w-5rem justify-content-end">
        <div class="w-full top-header" style="text-align: center;">
          <span class="justify-content-center" style="text-align: center;">Working Days</span>
        </div>
      </th>

      <th class="flex-none w-5rem justify-content-end">
        <div class="w-full top-header" style="text-align: center;">
          <span class="justify-content-center" style="text-align: center;">Festives</span>
        </div>                    
      </th>

      <th class="flex-none w-5rem justify-content-end">
        <div class="w-full top-header" style="text-align: center;">
          <span class="justify-content-center" style="text-align: center;">Vacations</span>
        </div>                
      </th>  
      
      <th class="flex-none w-5rem justify-content-end" style="border-right: 2px solid deepskyblue;">
        <div class="w-full top-header">
          <span class="justify-content-center" style="text-align: center;">Others</span>
        </div>                
      </th>
      <th *ngFor="let day of monthDaysList" style="text-align: center; width: 5px;">
        <div class="flex flex-row w-full top-header">
          <span class="flex flex-1 justify-content-center">{{day[1].day}}</span>
      </div> 
      </th>
    </tr>
  </ng-template>
  
  <ng-template pTemplate="body" let-group let-columns="columns">
    <tr>
      <td style="border-bottom: 2px solid deepskyblue;">
        {{ group.person.name }}
      </td>
      <td class="flex-none w-5rem justify-content-end" style="border-bottom: 2px solid deepskyblue;">
        <p>{{ group.person.wk }}</p>
      </td>
      <td class="flex-none w-5rem justify-content-end" style="border-bottom: 2px solid deepskyblue;">
        <p>{{ group.person.festives }}</p>
      </td>
      <td class="flex-none w-5rem justify-content-end" style="border-bottom: 2px solid deepskyblue;">
        <p>{{ group.person.vacations }}</p>
      </td>
      <td class="flex-none w-5rem justify-content-end" style="border-right: 2px solid deepskyblue; border-bottom: 2px solid deepskyblue;">
        <p>{{ group.person.others }}</p>
      </td>
      <td *ngFor="let day of monthDaysList" 
      style="border-bottom: 2px solid deepskyblue; border-left: 1px solid lightgray; width: 5px; text-align: center;">
      <p>{{day[1]?.day}}</p>
      </td>
    </tr>
  </ng-template>
  
</p-table>